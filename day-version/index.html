<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8E59MSLP3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-0V2HS5NSS6');
    </script>

    <!-- automatically loading the head -->
    <script>
      fetch('../BODY/head-body.html')
        .then(response => response.text())
        .then(html => {
          document.getElementById('head-body').outerHTML = html;
        });
    </script>
    <div id="head-body"></div>
    
    <!-- The rest of your head (title, styles, etc.) -->
    <link rel="stylesheet" href="./styles/style.css" />
    <link rel="icon" href="./icons/SWH_logo.png" />
    
  </head>

  <body>
    <header>
      <nav>
          <div class="logo">
            <a href="./index.html"><img src="./icons/SWH_logo.png" alt="logo" width="80px" height="70px"/></a>
          </div>

          <ul>
            <li><a class="active" href="./index.html">Home</a></li>
            <li><a class="nonactive" href="./news/news.html">News</a></li>
            <li><a class="nonactive" href="./about/about.html">About</a></li>
            <li><a class="nonactive" href="./research/research.html">Research</a></li>
            <li><a class="nonactive" href="./facility/facility.html">Facility</a></li>
            <li><a class="nonactive" href="./publications/publications.html">Publications</a></li>
            <li><a class="nonactive" href="./fun/fun.html">Fun</a></li>
            <a class="switch" href="../../night-version/index.html"><img src="./icons/day_night.png" alt="switch" width="20px" height="20px"/></a>
          </ul>
      </nav>
    </header>

    <div class="container">
      <!-- Home page top panel -->
      <section class="intro">
        <div class="intro-text">
          <h3>W. Shao Laboratory<br/></h3>
          <p>
            Electronic and Photonic Materials Discovery<br/>
            @Department of Chemistry<br/>
            @University of Georgia
          </p>
          <p>- Welcome! </p>
        </div>

        <div class="intro-images" id="recent-news-panel">
            <div id="news-content" style="position: relative; min-height: 250px;">
                <!-- News will be loaded here -->
            </div>
        </div>
      </section>
      
      <style>
        /* News card container - controls layout and animation */
        .news-card {
          position: absolute;
          width: 50%;  /* CHANGE: Adjust card width (e.g., 100% for full width) */
          opacity: 0;
          transition: opacity 2s ease-in-out;  /* CHANGE: Adjust fade speed (e.g., 0.5s for faster) */
          padding: 1rem;
          box-sizing: border-box;
          background: transparent;
        }
        .news-card.active {
          opacity: 1;
        }
        /* News image styling */
        .news-card img {
          width: 100%;
          height: auto;
          aspect-ratio: 1 / 1;  /* CHANGE: Image aspect ratio (e.g., 16 / 9 for landscape) */
          object-fit: cover;
          border-radius: 8px;  /* CHANGE: Image corner roundness (0px for square) */
          margin-bottom: 1rem;
        }
      </style>

      <script>
        /* ========== NEWS CAROUSEL CONFIGURATION ========== */
        
        let newsData = [];
        let currentIndex = 0;
        let autoRotateInterval;

        // FUNCTION: Fetch news from news-body.html and filter featured items
        async function loadRecentNews() {
          try {
            const response = await fetch('../BODY/news-body.html');  // CHANGE: Update path if news file location changes
            const html = await response.text();
            
            // Parse the HTML to extract news items
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const newsItems = doc.querySelectorAll('.news-pair');
            
            // Filter for featured news items (marked with data-featured="true" in news-body.html)
            const featuredItems = Array.from(newsItems).filter(item => item.getAttribute('data-featured') === 'true');
            
            // If no featured items exist, fallback to showing first 5 news items
            const itemsToDisplay = featuredItems.length > 0 ? featuredItems : Array.from(newsItems).slice(0, 5);  // CHANGE: Adjust fallback count (e.g., .slice(0, 3) for 3 items)
            
            // Extract data from each news item
            newsData = itemsToDisplay.map(item => ({
              date: item.querySelector('.news-date')?.textContent || '',
              title: item.querySelector('h3')?.textContent || '',
              imgSrc: item.querySelector('img')?.getAttribute('src') || ''
            }));
            
            if (newsData.length > 0) {
              renderNewsCarousel();
              startAutoRotate();
            }
          } catch (error) {
            console.error('Error loading news:', error);
            document.getElementById('news-content').innerHTML = '<p style="color: #888;">Unable to load news.</p>';
          }
        }
        
        // FUNCTION: Generate HTML for news carousel
        function renderNewsCarousel() {
          const container = document.getElementById('news-content');
          let html = '';
          
          newsData.forEach((news, index) => {
            html += `
              <div class="news-card ${index === 0 ? 'active' : ''}" data-index="${index}">
                ${news.imgSrc ? `<img src="${news.imgSrc}" alt="${news.title}">` : ''}
                <div>
                  <span style="font-size: 1rem; color: #888; font-weight: bold; display: block; margin-bottom: 0.5rem;">${news.date}</span>
                  <h4 style="margin: 0 0 0.8rem 0; font-size: 1.6rem; color: #2c2c2c; line-height: 1.3;">${news.title}</h4>
                  <a href="./news/news.html" style="text-decoration: none; font-weight: bold; font-size: 1.1rem; display: inline-block; margin-top: 1rem;">Read more â†’</a>
                </div>
              </div>
            `;
          });
          
          container.innerHTML = html;
        }
        
        // FUNCTION: Show specific slide by index
        function showSlide(index) {
          const cards = document.querySelectorAll('.news-card');
          const dots = document.querySelectorAll('.news-dot');
          
          cards.forEach((card, i) => {
            card.classList.toggle('active', i === index);
          });
          
          dots.forEach((dot, i) => {
            dot.classList.toggle('active', i === index);
          });
          
          currentIndex = index;
        }
        
        // FUNCTION: Advance to next slide (randomized)
        function nextSlide() {
          let nextIndex;
          // Keep selecting random slides until we get one different from current
          do {
            nextIndex = Math.floor(Math.random() * newsData.length);
          } while (nextIndex === currentIndex && newsData.length > 1);
          
          showSlide(nextIndex);
        }
        
        // FUNCTION: Jump to specific slide (called when clicking dots)
        function goToSlide(index) {
          showSlide(index);
          // Reset auto-rotate timer when manually navigating
          stopAutoRotate();
          startAutoRotate();
        }
        
        // FUNCTION: Start automatic rotation
        function startAutoRotate() {
          autoRotateInterval = setInterval(nextSlide, 5000);  // CHANGE: Rotation speed in milliseconds (e.g., 5000 for 5 seconds)
        }
        
        // FUNCTION: Stop automatic rotation
        function stopAutoRotate() {
          if (autoRotateInterval) {
            clearInterval(autoRotateInterval);
          }
        }
        
        // Load news on page load
        loadRecentNews();
      </script>





      <!-- Gallery Sign -->
      <section class="more-info">
        <p class="closing">Gallery &ensp; <i class="arrow down"></i></p>
      </section>
      
      <!-- Gallery Panel -->
      <section class="project-highlevel">
        <!-- Grid #1 -->
        <div class="grid">
          <div class="img-wrapper2">
            <img src="/TOC/twist_1.jpg" alt="Twisted Ribbons" class="zoom blur">
            <div class="content fade">
              <div class="image__title">Twisted Ribbons</div>
              <p class="image__description">
                A piece of helicoid made of layered halide <br>
                perovskites grown out of random crystals.
              </p>
            </div>
          </div>

          <div class="img-wrapper2">
            <img src="/TOC/bear.jpg" alt="A Valentine's Day of Halide Perovskite" class="zoom blur">
            <div class="content fade">
              <div class="image__title">A Valentine's Day of <br> Halide Perovskite</div>
              <p class="image__description">
                Layered Perovskites form 2D flexible plates <br>
                - when these plates cluster, <br> one may discover serendipitous shapes <br>
              </p>
            </div>
          </div>
        </div>
        
        <!-- Grid #2 -->  
        <div class="grid">     
          <div class="img-wrapper">
            <img src="/TOC/chocolate.jpg" alt="Chocolate Crystals" class="zoom blur">
            <div class="content fade">
              <div class="image__title">Chocolate Crystals</div>
              <p class="image__description">
                or "gold bar"
              </p>
            </div>
          </div>
          
          <div class="img-wrapper">
            <img src="/TOC/earth.jpg" alt="Earth" class="zoom ">
            <div class="content fade">
              <div class="image__title"> </div>
              <p class="image__description">
              </p>
            </div>
          </div>

          <div class="img-wrapper">
            <img src="/TOC/helical_1.jpg" alt="Helical Ribbons" class="zoom blur">
            <div class="content fade">
              <div class="image__title">Helical Ribbons</div>
              <p class="image__description">
              </p>
            </div>
          </div>
        </div>  
        
        <!-- Grid #3 -->
        <div class="grid" style="height: 30%;">
          <div class="img-wrapper" style="aspect-ratio: 2 / 1">
            <img src="/TOC/Map_purple-gold.jpg" alt="Layered Perovskite Nanowires" class="zoom blur">
            <div class="content fade" >
              <div class="image__title">Layered Perovskite Nanowires</div>
              <p class="image__description"><a href="https://www.science.org/doi/10.1126/science.adl0920"><u>Link</u> </a></p>
            </div>
          </div>

          <div class="img-wrapper" style="width:50%; aspect-ratio: 1 / 1">
            <img src="/TOC/lasing_1.jpg" alt="Layered Perovskite Nanowires" class="zoom blur">
            <div class="content fade" >
              <div class="image__title">Miniaturized Layered Perovskite Lasers</div>
              <p class="image__description"><a href="./research/research-project/prj4_pvsklaser.html"><u>Link</u> </a></p>
            </div>
          </div>
        </div>
              
        <div class="more-info">
        </div>
            
      </section>
    </div>
  </body>

  <footer>
    <h4><a href="https://www.linkedin.com/in/cali-li/"><u>Website Developed by Cali Li</u></a> <br>
          wenjingli199707 at gmail dot com <br>
          &copy;Copyright &copy;2024 All rights reserved
    </h4>

      <ul>
        <li>
          <a href="https://www.linkedin.com/in/wenhao-shao/" target="_blank">
            <img src="./icons/linkedin.svg" alt="linkedin-social" height="40px"/>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/whshao" target="_blank">
            <img src="./icons/twitter.svg" alt="twitter-social" height="40px"/>
          </a>
        </li>
        <li>
          <a href="https://www.chem.uga.edu/directory/people/wenhao-shao" target="_blank">
            <img src="./icons/UGA.svg" alt="UGA-profile" height="40px"/>
          </a>
        </li>
        
      </ul>

  </footer>
</html>